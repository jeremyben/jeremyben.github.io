function $buo_f(){var e=document.createElement("script");e.src="//browser-update.org/update.js",document.body.appendChild(e)}function addEvent(e,t,o){null!=e&&"undefined"!=typeof e&&(e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function resizeBg(){window.innerWidth<=bgcloudsWidth+160?(bgclouds.setAttribute("preserveAspectRatio","xMaxYMin slice"),bgclouds.setAttribute("height",bgcloudsHeight)):(bgclouds.setAttribute("height",bgcloudsHeight+60),bgclouds.setAttribute("preserveAspectRatio","none"))}!function(e,t){"use strict";function o(t,o){var n=e.extend(!0,{duration:200,effect:{open:e.fn.fadeIn,close:e.fn.fadeOut},overlay:{opacity:.6,zIndex:9e3},closeClass:T+"-close"},o);return n.overlay.fillColor=n.overlay.fillColor||n.overlay.color||"#888",n.zIndex=n.zIndex||n.overlay.zIndex+1,u||(u=e(window),h=e('<div class="'+T+'-overlay" />').css({position:"fixed",left:0,top:0,width:"100%",height:"150%",display:"none"}).appendTo(p=e("body")).click(i).on("touchmove",function(){return!1}),e(document).focusin(function(t){D&&!D.has(t.target).length&&(v?v.focus():e(document.activeElement).blur())}).keydown(function(e){return D&&27===e.keyCode?i(e):void 0})),t.each(function(){var t=e(this),o={position:"fixed",display:"none",zIndex:n.zIndex};n.offset?"function"==typeof n.offset?n.offset=function(e){return function(){var t=this;return e.call(t,function(){r.call(t)})}}(n.offset):(o.left=n.offset.left,o.top=n.offset.top,o.marginLeft=o.marginTop=""):n.offset=r,n.closeClass&&t.find("."+n.closeClass).off("click",i).click(i),e.each([["open",I],["close",z],["beforeopen",E],["beforeclose",C]],function(e,o){var i=o[0],a=o[1];"function"==typeof n[i]&&t.off(a,n[i]).on(a,n[i])}),t.css(o).data(x,n).appendTo(p).on("touchmove",function(){return!1})})}function n(n,r){var l,T,z,C,k,A=n.length?n.eq(0):t;return s||!A?n:((r||!(l=A.data(x)))&&(l=o(A,r).data(x)),!d&&l.force&&f&&f.get(0)!==A.get(0)&&(f.stop(!0,!0),h.stop(!0,!0)),!d&&l.force&&D&&D.get(0)!==A.get(0)?(d=A,i(D)):null===D&&(s=!0,k=e.Event(E,{cancelable:!0}),A.trigger(k),k.isDefaultPrevented()||(T=p.get(0).style,m=T.overflow,z=p.prop("clientWidth"),C=p.prop("clientHeight"),p.css("overflow","hidden"),z-=p.prop("clientWidth"),C-=p.prop("clientHeight"),b=T.marginRight,y=T.marginBottom,0>z&&p.css("marginRight","+="+-z),0>C&&p.css("marginBottom","+="+-C),g=e(document.activeElement).blur(),v=null,w=u.scrollLeft(),$=u.scrollTop(),u.scroll(c),a(A,l),l.effect.open.call(f=A,l.duration||1,function(){f=t,A.find("a,input,select,textarea,button,object,area,img,map").each(function(){var t=e(this);return t.focus().get(0)===document.activeElement?(v=t,!1):void 0}),D=A,A.trigger(I)}),h.css({backgroundColor:l.overlay.fillColor,zIndex:l.overlay.zIndex}).fadeTo(l.duration,l.overlay.opacity),D=0),s=!1),n)}function i(o){var i,a,r,l,v=o instanceof e.Event;return!s&&D&&(s=!0,i=v?D:function(){var e=o.index(D);return e>-1?o.eq(e):t}(),i&&(r=e.Event(C,{cancelable:!0}),v?r.from=o:d&&(r.from=d),i.trigger(r),r.isDefaultPrevented()?d=t:(a=i.data(x),l=d?1:a.duration||1,a.effect.close.call(f=i,l,function(){var a;f=t,p.css({overflow:m,marginRight:b,marginBottom:y}),g&&g.length&&g.focus(),u.off("scroll",c).scrollLeft(w).scrollTop($),D=null,a=e.Event(z),v?a.from=o:d&&(a.from=d),i.trigger(a),d&&window.setTimeout(function(){n(d),d=t},0)}),h.fadeOut(l),D=0)),s=!1),v?(o.preventDefault(),!1):o}function a(e,t){var o;t=t||e.data(x),"function"==typeof t.offset&&(o=t.offset.call(e))&&e.css({left:o.left,top:o.top,marginLeft:"",marginTop:""})}function r(){this.css({left:"50%",top:"50%",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"})}function c(e){return u.scrollLeft(w).scrollTop($),e.preventDefault(),!1}function l(e,n,i){var a,r=e.length?e.eq(0):t;return r&&(a=r.data(x)||o(r).data(x),a.hasOwnProperty(n))?(null!=i&&(a[n]=i),a[n]):void 0}var s,d,f,u,p,h,g,v,m,b,y,w,$,x="plainModal",T=x.toLowerCase(),I=T+"open",z=T+"close",E=T+"beforeopen",C=T+"beforeclose",D=null;e(function(){e(window).resize(function(){D&&a(D)})}),e.fn[x]=function(e,t,a){return"open"===e?n(this,t):"close"===e?i(this):"option"===e?l(this,t,a):o(this,e)}}(jQuery),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var $buoop={c:2,reminder:24,reminderClosed:24,l:"fr"};try{document.addEventListener("DOMContentLoaded",$buo_f,!1)}catch(e){window.attachEvent("onload",$buo_f)}var bgclouds=document.getElementById("bgclouds"),bgcloudsWidth=parseInt(bgclouds.getAttribute("width").replace("px",""),10),bgcloudsHeight=bgclouds.clientHeight;resizeBg(),addEvent(window,"resize",resizeBg),$(document).ready(function(){var e=(new Date).getFullYear();$("#year").text(e);for(var t=$("#patron").detach(),o=0;8>o;o++)t.clone().appendTo(".sky").addClass("bg-cloud-anim-"+getRandomInt(2,6)).css({display:"block","font-size":getRandomInt(3,7)+"px",top:getRandomInt(24,79)+"0px",left:getRandomInt(12,30)+"%"});$("#getPortfolio").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$("#portfolio").offset().top},700)}),$(".choice").on("click",function(e){e.stopImmediatePropagation();var t=$(this),o=t.parent(),n=t.data("open"),i=t.siblings(),a=o.prev().data("open");if(a){var r=o.prev().detach();r.data("open",!1).removeAttr("style").addClass("viewed").find("h3").removeAttr("style").end().find(".close-choice").hide().end().find(".project").remove()}if(!n){t.insertBefore(o);var c=o.height();if(o.height(c),i.hide(),window.innerWidth>860)var l=600;else var l=0;t.animate({width:"100%","margin-right":"0"},l,function(){$.ajax({url:t.data("url"),type:"GET",cache:!1}).done(function(e){console.log(e),t.find("h3").animate({"font-size":"2em"},600).siblings(".close-choice").fadeIn(600),$(e).hide().appendTo(t).slideDown(),i.appendTo(o).slideDown(),$(r).hide().appendTo(o).slideDown(),t.data("open",!0).css("cursor","default"),$("html, body").animate({scrollTop:t.offset().top-50},500)})})}}),$(".close-choice").on("click",function(e){e.stopImmediatePropagation();var t=$(this),o=$(".choices");o.height("");var n=t.closest(".choice").detach();t.hide(),n.data("open",!1).removeAttr("style").addClass("viewed").find("h3").removeAttr("style").end().find(".project").remove().end().hide().appendTo(o).slideDown()});var n=$("#contact-modal").plainModal({duration:400,overlay:{fillColor:"#b0dcff",opacity:.5},effect:{open:$.fn.slideDown,close:$.fn.slideUp}});$("#contact").on("click",function(e){e.preventDefault(),n.plainModal("open")}),$("#contact-form").on("submit",function(e){e.preventDefault();var t=$(this);t.find('input[type="submit"]').prop("disabled",!0),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serializeObject(),dataType:"json"}).done(function(){var e=t.width();t.queue("steps",function(e){t.slideToggle(),$("#contact").fadeToggle(),e()}).delay(400,"steps").queue("steps",function(o){var n='<h4 style="text-align:center">Reçu !</h4>';n+='<p style="text-align:center">Je suis déjà en train de répondre ;)</p>',t.html(n),t.children().width(e),t.slideToggle(),o()}).queue("steps",function(e){$("#contact").addClass("disabled").text("Merci !").fadeToggle(),e()}).delay(2250,"steps").queue("steps",function(e){n.plainModal("close"),e()}).dequeue("steps")}).fail(function(){console.log("error")})})});
