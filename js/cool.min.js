function $buo_f(){var e=document.createElement("script");e.src="//browser-update.org/update.js",document.body.appendChild(e)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}!function(e,t){"use strict";function o(t,o){var n=e.extend(!0,{duration:200,effect:{open:e.fn.fadeIn,close:e.fn.fadeOut},overlay:{opacity:.6,zIndex:9e3},closeClass:x+"-close"},o);return n.overlay.fillColor=n.overlay.fillColor||n.overlay.color||"#888",n.zIndex=n.zIndex||n.overlay.zIndex+1,u||(u=e(window),h=e('<div class="'+x+'-overlay" />').css({position:"fixed",left:0,top:0,width:"100%",height:"150%",display:"none"}).appendTo(p=e("body")).click(i).on("touchmove",function(){return!1}),e(document).focusin(function(t){z&&!z.has(t.target).length&&(v?v.focus():e(document.activeElement).blur())}).keydown(function(e){return z&&27===e.keyCode?i(e):void 0})),t.each(function(){var t=e(this),o={position:"fixed",display:"none",zIndex:n.zIndex};n.offset?"function"==typeof n.offset?n.offset=function(e){return function(){var t=this;return e.call(t,function(){r.call(t)})}}(n.offset):(o.left=n.offset.left,o.top=n.offset.top,o.marginLeft=o.marginTop=""):n.offset=r,n.closeClass&&t.find("."+n.closeClass).off("click",i).click(i),e.each([["open",C],["close",I],["beforeopen",E],["beforeclose",D]],function(e,o){var i=o[0],a=o[1];"function"==typeof n[i]&&t.off(a,n[i]).on(a,n[i])}),t.css(o).data(T,n).appendTo(p).on("touchmove",function(){return!1})})}function n(n,r){var l,x,I,D,k,L=n.length?n.eq(0):t;return s||!L?n:((r||!(l=L.data(T)))&&(l=o(L,r).data(T)),!d&&l.force&&f&&f.get(0)!==L.get(0)&&(f.stop(!0,!0),h.stop(!0,!0)),!d&&l.force&&z&&z.get(0)!==L.get(0)?(d=L,i(z)):null===z&&(s=!0,k=e.Event(E,{cancelable:!0}),L.trigger(k),k.isDefaultPrevented()||(x=p.get(0).style,g=x.overflow,I=p.prop("clientWidth"),D=p.prop("clientHeight"),p.css("overflow","hidden"),I-=p.prop("clientWidth"),D-=p.prop("clientHeight"),y=x.marginRight,b=x.marginBottom,0>I&&p.css("marginRight","+="+-I),0>D&&p.css("marginBottom","+="+-D),m=e(document.activeElement).blur(),v=null,$=u.scrollLeft(),w=u.scrollTop(),u.scroll(c),a(L,l),l.effect.open.call(f=L,l.duration||1,function(){f=t,L.find("a,input,select,textarea,button,object,area,img,map").each(function(){var t=e(this);return t.focus().get(0)===document.activeElement?(v=t,!1):void 0}),z=L,L.trigger(C)}),h.css({backgroundColor:l.overlay.fillColor,zIndex:l.overlay.zIndex}).fadeTo(l.duration,l.overlay.opacity),z=0),s=!1),n)}function i(o){var i,a,r,l,v=o instanceof e.Event;return!s&&z&&(s=!0,i=v?z:function(){var e=o.index(z);return e>-1?o.eq(e):t}(),i&&(r=e.Event(D,{cancelable:!0}),v?r.from=o:d&&(r.from=d),i.trigger(r),r.isDefaultPrevented()?d=t:(a=i.data(T),l=d?1:a.duration||1,a.effect.close.call(f=i,l,function(){var a;f=t,p.css({overflow:g,marginRight:y,marginBottom:b}),m&&m.length&&m.focus(),u.off("scroll",c).scrollLeft($).scrollTop(w),z=null,a=e.Event(I),v?a.from=o:d&&(a.from=d),i.trigger(a),d&&window.setTimeout(function(){n(d),d=t},0)}),h.fadeOut(l),z=0)),s=!1),v?(o.preventDefault(),!1):o}function a(e,t){var o;t=t||e.data(T),"function"==typeof t.offset&&(o=t.offset.call(e))&&e.css({left:o.left,top:o.top,marginLeft:"",marginTop:""})}function r(){this.css({left:"50%",top:"50%",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"})}function c(e){return u.scrollLeft($).scrollTop(w),e.preventDefault(),!1}function l(e,n,i){var a,r=e.length?e.eq(0):t;return r&&(a=r.data(T)||o(r).data(T),a.hasOwnProperty(n))?(null!=i&&(a[n]=i),a[n]):void 0}var s,d,f,u,p,h,m,v,g,y,b,$,w,T="plainModal",x=T.toLowerCase(),C=x+"open",I=x+"close",E=x+"beforeopen",D=x+"beforeclose",z=null;e(function(){e(window).resize(function(){z&&a(z)})}),e.fn[T]=function(e,t,a){return"open"===e?n(this,t):"close"===e?i(this):"option"===e?l(this,t,a):o(this,e)}}(jQuery),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var $buoop={c:2,reminder:24,reminderClosed:24,l:"fr"};try{document.addEventListener("DOMContentLoaded",$buo_f,!1)}catch(e){window.attachEvent("onload",$buo_f)}$(document).ready(function(){var e=(new Date).getFullYear();$("#year").text(e),function(){for(var e=$("#patron").detach(),t=0;8>t;t++)e.clone().appendTo(".sky").addClass("bg-cloud-anim-"+getRandomInt(2,6)).css({display:"block","font-size":getRandomInt(3,7)+"px",top:getRandomInt(24,79)+"0px",left:getRandomInt(12,30)+"%"})}(),$("#getPortfolio").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$("#portfolio").offset().top},700)}),$(".choice").on("click",function(e){e.stopImmediatePropagation();var t=$(this),o=t.parent(),n=t.data("open"),i=t.siblings(),a=o.prev().data("open");if(a){var r=o.prev().detach();r.data("open",!1).removeAttr("style").addClass("viewed").find("h3").removeAttr("style").end().find(".close-choice").hide().end().find(".project").remove()}if(!n){t.insertBefore(o);var c=o.height();if(o.height(c),i.hide(),window.innerWidth>860)var l=600;else var l=0;t.animate({width:"100%","margin-right":"0"},l,function(){$.ajax({url:t.data("url"),type:"GET",cache:!1}).done(function(e){console.log(e),t.find("h3").animate({"font-size":"2em"},600).siblings(".close-choice").fadeIn(600),$(e).hide().appendTo(t).slideDown(),i.appendTo(o).slideDown(),$(r).hide().appendTo(o).slideDown(),t.data("open",!0).css("cursor","default"),$("html, body").animate({scrollTop:t.offset().top-50},500)})})}}),$(".close-choice").on("click",function(e){e.stopImmediatePropagation();var t=$(this),o=$(".choices");o.height("");var n=t.closest(".choice").detach();t.hide(),n.data("open",!1).removeAttr("style").addClass("viewed").find("h3").removeAttr("style").end().find(".project").remove().end().hide().appendTo(o).slideDown()});var t=$("#contact-modal").plainModal({duration:400,overlay:{fillColor:"#b0dcff",opacity:.5},effect:{open:$.fn.slideDown,close:$.fn.slideUp}});$("#contact").on("click",function(e){e.preventDefault(),t.plainModal("open")}),$("#contact-form").on("submit",function(e){e.preventDefault();var o=$(this);o.find('input[type="submit"]').prop("disabled",!0),$.ajax({url:o.attr("action"),type:o.attr("method"),data:o.serializeObject(),dataType:"json"}).done(function(){var e=o.width();o.queue("steps",function(e){o.slideToggle(),$("#contact").fadeToggle(),e()}).delay(400,"steps").queue("steps",function(t){var n='<h4 style="text-align:center">Reçu !</h4>';n+='<p style="text-align:center">Je suis déjà en train de répondre ;)</p>',o.html(n),o.children().width(e),o.slideToggle(),t()}).queue("steps",function(e){$("#contact").addClass("disabled").text("Merci !").fadeToggle(),e()}).delay(2250,"steps").queue("steps",function(e){t.plainModal("close"),e()}).dequeue("steps")}).fail(function(){console.log("error")})}),$("#responsive").on("click",function(e){e.preventDefault();var t=$("body"),o=$(".cloud").filter("#patron").detach();$(".plainmodal-overlay").remove();var n=document.documentElement.innerHTML,i=t.html(),a=$('<iframe frameborder="0" style="width:100%; height:100%; overflow:hidden;">'),r=$('<span style="z-index:10;position:fixed;bottom:0;margin-left:-28px"><img style="max-width:none;" src="img/stickpush.svg"></span>');t.css({height:"100%",overflow:"hidden"}),$("html").css("height","100%"),document.body.innerHTML="",a.appendTo("body"),setTimeout(function(){var e=a[0].contentWindow.document;e.open(),e.write(n),e.close(),r.appendTo("body"),t.css("background",'url("img/circuit.svg") center right / auto 100% repeat-x fixed')},1),a.animate({width:"400px"},3e3,function(){console.log(r),console.log(r.find("img")),r.css("margin-left",0).find("img").prop("src","img/stickstand.svg"),setTimeout(function(){a.animate({width:"100%"},3e3,function(){$("body").html(i).removeAttr("style"),$("html").removeAttr("style"),o.appendTo(".sky")})},400)})})});
